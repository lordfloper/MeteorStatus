AWSTemplateFormatVersion : '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: MeterosStatus
Resources: 
  MeterosStatus:
    Type: AWS::Serverless::Function
    Properties:
      Handler: MeteorsStatus.lambda_handler
      CodeUri: handler
      Runtime: python3.10
      MemorySize: 256
      Timeout: 60
      ReservedConcurrentExecutions: 1
      Policies:
        - S3ReadPolicy:
            BucketName: MeteorsDataBucket
      Events:
        S3Event:
          Type: S3
          Properties:
            Bucket: !Ref MeteorsDataBucket
            Events: s3:PutObject
  MeteorsDataBucket:
    Type: AWS::S3::Bucket
    DeletionPolicy: Retain
    Properties: 
      BucketName: MeteorsDataBucket
      BucketEncryption: 
        ServerSideEncryptionConfiguration: 
          - ServerSideEncryptionByDefault: 
              SSEAlgorithm: AES256
      PublicAccessBlockConfiguration:
        BlockPublicAcls: True
        BlockPublicPolicy: True
        IgnorePublicAcls: True
        RestrictPublicBuckets: True